<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Episode 06 - ゆるデュオ△</title>
    <!-- 共通CSSの読み込み -->
    <link rel="stylesheet" href="style.css">
    <style>
        /* --- STORY詳細 独自スタイル（シリーズ共通仕様） --- */
        .urabana-trigger-btn { position: fixed; top: 20px; left: 20px; z-index: 1000; background: var(--accent-color); color: white; border: none; padding: 8px 15px; border-radius: 50px; font-weight: bold; font-size: 0.8rem; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: all 0.3s; display: flex; align-items: center; gap: 5px; }
        .urabana-trigger-btn:hover { transform: scale(1.1) rotate(-5deg); background: var(--sub-accent); }

        .carousel-section { padding: 60px 0; overflow: hidden; background: rgba(0,0,0,0.02); margin-bottom: 40px; position: relative; min-height: 400px; }
        .carousel-container { display: flex; justify-content: center; align-items: center; gap: 15px; perspective: 1000px; min-height: 300px; }
        .carousel-item { width: 200px; aspect-ratio: 16/9; border-radius: 12px; overflow: hidden; border: 4px solid white; box-shadow: 0 10px 20px rgba(0,0,0,0.1); transition: all 0.6s; cursor: pointer; opacity: 0.5; transform: scale(0.8); flex-shrink: 0; }
        .carousel-item.active { width: clamp(280px, 65vw, 600px); opacity: 1; transform: scale(1); z-index: 10; box-shadow: 0 20px 50px rgba(0,0,0,0.25); border-width: 6px; }
        .carousel-item img { width: 100%; height: 100%; object-fit: cover; }

        .normal-only { display: block !important; }
        .unsung-only { display: none !important; }
        body.unsung-mode .normal-only { display: none !important; }
        body.unsung-mode .unsung-only { display: block !important; }

        /* スプリットレイアウト（旅のスポット） */
        .spot-list { display: flex; flex-direction: column; gap: 40px; margin-top: 30px; }
        .spot-item-split { display: flex; align-items: center; gap: 40px; background: var(--card-bg); padding: 25px; border-radius: var(--border-radius); box-shadow: 0 10px 30px rgba(0,0,0,0.03); border: 1px solid rgba(0,0,0,0.05); transition: transform 0.3s ease; }
        .spot-item-split:hover { transform: translateY(-3px); }
        .spot-item-split:nth-child(even) { flex-direction: row-reverse; }
        .spot-visual { flex: 1.2; overflow: hidden; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .spot-visual img { width: 100%; aspect-ratio: 16/9; object-fit: cover; cursor: zoom-in; transition: transform 0.5s; display: block; }
        .spot-visual img:hover { transform: scale(1.08); }
        .spot-info { flex: 1; }
        .spot-info h4 { font-size: 1.3rem; color: var(--accent-color); margin-bottom: 15px; padding-left: 10px; border-left: 5px solid var(--accent-color); }
        .spot-info p { font-size: 0.95rem; line-height: 1.8; }

        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; justify-content: center; align-items: center; z-index: 5000; cursor: zoom-out; }
        .overlay img { max-width: 90%; max-height: 90%; border-radius: 8px; }

        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 4000; padding: 20px; backdrop-filter: blur(8px); }
        .modal-content { background: var(--bg-color); width: 100%; max-width: 800px; max-height: 85vh; border-radius: 25px; overflow-y: auto; padding: 40px; position: relative; border: 2px solid var(--accent-color); }
        .modal-close { position: absolute; top: 20px; right: 25px; font-size: 2.5rem; cursor: pointer; color: var(--accent-color); }
        
        body.unsung-mode .carousel-item img { filter: contrast(1.1) brightness(0.8) sepia(0.2) hue-rotate(-20deg); }

        @media (max-width: 900px) { .spot-item-split, .spot-item-split:nth-child(even) { flex-direction: column; gap: 20px; } }
    </style>
</head>
<body>

    <button class="urabana-trigger-btn" onclick="toggleModal('urabana-modal', true)"><span>△</span> 制作秘話</button>

    <header class="site-header container">
        <h1 class="logo-title">ゆるデュオ△</h1>
        <nav class="main-nav">
            <a href="index.html" class="nav-item">Top</a>
            <a href="news.html" class="nav-item">News</a>
            <a href="story.html" class="nav-item active">Story</a>
            <a href="character.html" class="nav-item">Character</a>
            <a href="world.html" class="nav-item">World</a>
            <a href="movie.html" class="nav-item">Movie</a>
        </nav>
    </header>

    <main>
        <div class="container" style="text-align: center; margin-bottom: 20px;">
            <div style="font-size: 1rem; font-weight: bold; color: var(--accent-color);">Episode 06</div>
            <h2 class="normal-only" style="font-size: 2rem;">こころ の かたち とう きょう</h2>
            <h2 class="unsung-only" style="font-size: 2rem; color: var(--accent-color);">こころ の かたち とう きょう</h2>
        </div>

        <section class="carousel-section">
            <div class="carousel-container" id="main-carousel"></div>
            <div style="text-align: center; margin-top: 30px; display: flex; justify-content: center; gap: 20px;">
                <button class="nav-item" style="padding: 8px 20px;" onclick="rotateCarousel(-1)">◀ Prev</button>
                <button class="nav-item" style="padding: 8px 20px;" onclick="rotateCarousel(1)">Next ▶</button>
            </div>
        </section>

        <div class="container">
            <section class="synopsis">
                <h2 class="tape-header normal-only">あらすじ</h2>
                <h2 class="tape-header unsung-only">異界のあらすじ</h2>
                <div class="card normal-only">
                    <p>紫陽花と傘が道を彩るようになった某月、エヴィちゃんが東京にやって来ました。エヴィちゃんを案内しようとしたマコトちゃんとなでこちゃんでしたが、二人とも東京観光は不案内。そこで思い付いたのが、サイコロの出目で行き先を決める某番組風観光。はじめはランダムに決まる目的地に振り回される三人でしたが、いつものようにワイワイガヤガヤと過ごすことになります。</p>
                    <p style="margin-top: 0.5rem;">しかし、その日の夜、遂に迎えたなでこの手術。その最中に、マコトちゃんはある異界へと迷い込むことになりますが...。</p>
                    <p style="margin-top: 0.5rem; font-weight: bold;">シリーズ第6話、マコトちゃんは心の形を問い掛けられます。<br>「目が、さめたかい？」</p>
                </div>
                <div class="card unsung-only">
                    <p>迷い込んだ先はお父さんにそっくりな、けれどどこか違う医師・コウが管理する、静まり返った異界の病院でした。 そこでマコトは、「囚人のジレンマ」「テセウスの船」「臓器くじ」という、かつて自分の運命を決定づけた、残酷で哲学的な三つの問いに再び向き合うことになります。</p>
                    <p style="margin-top: 0.5rem;">「自分を自分だと決められるのは、自分」――コウとの対話を通じて、マコトは他人の体を譲り受けて生きる自分自身の「生」を見つめ直します。 しかし、あかりを救うために作り出したこの異界に、あかりはいませんでした。 絶望し、自らの無力さに打ちひしがれるコウ。その時、マコトのポケットの中で、かつての旅で預かった「桜の枝」が激しく震えだします。</p>
                    <p style="margin-top: 0.5rem;">なでこも合流し、二人の強い願いが異界の境界を越えて共鳴したとき、そこにはかつてコウが救えなかったはずの少女・あかりの姿がありました。 悲しい別れと後悔を乗り越え、真っ黒だったアルバムのページに「思い出」という名の色彩が灯る――。そして彼女たちは自分の心の形を確かめ、新たな約束と共に次のページを紡いでいくことでしょう。</p>
                </div>
            </section>

            <section style="margin-top: 50px;">
                <h2 class="tape-header">旅のスポット</h2>
                
                <div class="spot-list normal-only">
                    <div class="spot-item-split">
                        <div class="spot-visual"><img src="04_assets/Story/story06/1toukyoueki.jpg" alt="東京駅" onclick="openOverlay(this)"></div>
                        <div class="spot-info">
                            <h4>東京駅</h4>
                            <p>イギリスから来日したエヴィをマコトとなでこが迎え、東京観光の拠点となった場所です。ここでマコトとなでこが考案した「サイコロで行き先を決める旅」が幕を開け、三人は期待に胸を膨らませて最初の目的地へと出発しました。</p>
                        </div>
                    </div>
                    <div class="spot-item-split">
                        <div class="spot-visual"><img src="04_assets/Story/story06/2haripota.jpg" alt="ハリポタランド" onclick="openOverlay(this)"></div>
                        <div class="spot-info">
                            <h4>魔法の世界へ、ハリポタランド</h4>
                            <p>映画の舞台が精巧に再現された魔法の世界で、ホグワーツ特急や各寮の部屋が展示されている施設です。マコト、なでこ、エヴィの三人は組み分け帽子による寮判定を楽しみ、甘いバタービールを酌み交わして「大人の女子会」の約束を交わしました。</p>
                        </div>
                    </div>
                    <div class="spot-item-split">
                        <div class="spot-visual"><img src="04_assets/Story/story06/3skytree.jpg" alt="スカイツリー" onclick="openOverlay(this)"></div>
                        <div class="spot-info">
                            <h4>最高峰の景色、スカイツリー</h4>
                            <p>日本最高峰の眺望を誇るタワーと、多様なショップが集まるソラマチからなる人気スポットです。展望台で富士山までの絶景を堪能した後、三人はポケモンセンターでお揃いのご当地ピカチュウのぬいぐるみを購入し、思い出の一枚を写真に収めました。</p>
                        </div>
                    </div>
                    <div class="spot-item-split">
                        <div class="spot-visual"><img src="04_assets/Story/story06/4monja.jpg" alt="もんじゃ焼き" onclick="openOverlay(this)"></div>
                        <div class="spot-info">
                            <h4>月島名物、もんじゃ焼き</h4>
                            <p>伝統的な東京の名物料理であるもんじゃ焼きの店が軒を連ねるエリアです。なでこの手ほどきを受けながらマコトが焼き上げた「最高傑作」のもんじゃを、小食なエヴィも含めた全員で夢中になって味わい、至福の時を過ごしました。</p>
                        </div>
                    </div>
                    <div class="spot-item-split">
                        <div class="spot-visual"><img src="04_assets/Story/story06/5hotel.png" alt="ホテルクレッセント" onclick="openOverlay(this)"></div>
                        <div class="spot-info">
                            <h4>東京の夜景、ホテルクレッセント</h4>
                            <p>三日月財団の拠点でもあり、エヴィが滞在した夜景の美しい高級ホテルです。別れを惜しむマコト、なでこ、エヴィの三人は、窓の外に広がる東京の景色を眺めながら、「また絶対に一緒に遊ぶ」という大切な指切りげんまんの約束を交わしました。</p>
                        </div>
                    </div>
                    <div class="spot-item-split">
                        <div class="spot-visual"><img src="04_assets/Story/story06/6byoin.jpg" alt="夜の病院" onclick="openOverlay(this)"></div>
                        <div class="spot-info">
                            <h4>夜の病院</h4>
                            <p>なでこの猫アレルギー克服手術を行うため、閉館後に訪れた蛇場見ユーリが勤務する病院です。手術を待っていたマコトは、父の忘れ物を取りに駐車場へ向かった際、現実から切り離された不可思議な異界へと迷い込むことになります。</p>
                        </div>
                    </div>
                </div>

                <div class="spot-list unsung-only">
                    <div class="spot-item-split">
                        <div class="spot-visual"><img src="04_assets/Story/story06/ikai1.png" alt="手術室" onclick="openOverlay(this)"></div>
                        <div class="spot-info">
                            <h4 style="color: var(--accent-color);">異界深度5：「囚人のジレンマ」</h4>
                            <p>父の病院に酷似しながらもどこか違和感のある異界の手術室です。マコトはそこで父に瓜二つの医師・コウと出会い、自身の過去を明かしながら、最初の一歩となる哲学的な問いに答えました。</p>
                        </div>
                    </div>
                    <div class="spot-item-split">
                        <div class="spot-visual"><img src="04_assets/Story/story06/ikai2.jpeg" alt="庭園" onclick="openOverlay(this)"></div>
                        <div class="spot-info">
                            <h4 style="color: var(--accent-color);">異界深度6：「テセウスの船」</h4>
                            <p>美しい噴水とベンチが置かれた静かな病院の庭園です。マコトは管理者であるコウと自己の同一性について対話し、水面に映し出される別世界の自分の姿や幼い頃の懐かしい記憶を見つめ直しました。</p>
                        </div>
                    </div>
                    <div class="spot-item-split">
                        <div class="spot-visual"><img src="04_assets/Story/story06/ikai3.jpg" alt="待合室" onclick="openOverlay(this)"></div>
                        <div class="spot-info">
                            <h4 style="color: var(--accent-color);">異界深度7：「臓器くじ」</h4>
                            <p>少し埃っぽく静謐な空気が漂う病院の待合室のような場所です。マコトは命の価値を問うコウの質問に対し、生きることへの強い肯定と誠実さを示し、部屋に置かれた一冊の古いフォトアルバムを見つけました。</p>
                        </div>
                    </div>
                    <div class="spot-item-split">
                        <div class="spot-visual"><img src="04_assets/Story/story06/ikai4.jpeg" alt="霊安室" onclick="openOverlay(this)"></div>
                        <div class="spot-info">
                            <h4 style="color: var(--accent-color);">（断章）異界深度7：霊安室</h4>
                            <p>多くの棺が並ぶ「霊安室」です。この場所は適合しなかった者たちの怨念が渦巻くエリアです。棺の中に「元の自分の体」を見つけたマコトは、襲い来る亡霊たちからコウの助けを借りて、間一髪で脱出することに成功しました。</p>
                        </div>
                    </div>
                    <div class="spot-item-split">
                        <div class="spot-visual"><img src="04_assets/Story/story06/ikai5.jpg" alt="答えの部屋" onclick="openOverlay(this)"></div>
                        <div class="spot-info">
                            <h4 style="color: var(--accent-color);">異界深度8：答えの部屋</h4>
                            <p>かつてマコトが手術を受けた部屋を再現した、コウの娘・あかりのために用意された手術室です。コウからの最後の質問に対し、マコトは静かに自身の答えを示しました。</p>
                        </div>
                    </div>
                    <div class="spot-item-split">
                        <div class="spot-visual"><img src="04_assets/Story/story06/ikai6.png" alt="花畑" onclick="openOverlay(this)"></div>
                        <div class="spot-info">
                            <h4 style="color: var(--accent-color);">花畑</h4>
                            <p>全員の強い願いによって「桜の枝」が共鳴し、辺り一面が花に覆われた幻想的な場所です。マコトとなでこは、絶望し跪いていたコウに諦めないよう語りかけ、共に強く願うことで、花の中で娘のあかりとの奇跡の再会を果たさせました。この場所で親子は数年越しの愛を伝え合い、悲しい後悔を温かな思い出へと塗り替えました。</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <div style="text-align: center; margin: 80px 0;"><a href="story.html" class="nav-item">ストーリー一覧に戻る</a></div>
    </main>

    <div id="urabana-modal" class="modal" onclick="toggleModal('urabana-modal', false)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="modal-close" onclick="toggleModal('urabana-modal', false)">&times;</span>
            <h2 class="tape-header">Urabana - 制作秘話</h2>
            <div class="urabana-section" style="margin-top: 30px;">
                <h3>鋭意作成中</h3>
                <p>しばらくお待ちください</p>
            </div>
        </div>
    </div>


    <div id="image-overlay" class="overlay" onclick="this.style.display='none'"><img id="overlay-img" src=""></div>
    <footer class="main-footer"><p>&copy; ゆるデュオ△ 制作委員会 / Unsung Duet Project</p></footer>
    <button class="mode-toggle" onclick="toggleMode()"><span id="toggle-icon">△</span></button>

    <script>
        const imageAssets = {
            normal: [
                "04_assets/Story/story06/6main.png",
                "04_assets/Story/story06/6-1.png",
                "04_assets/Story/story06/6-2.png",
                "04_assets/Story/story06/6-3.png",
                "04_assets/Story/story06/6-4.png"
            ],
            unsung: [
                "04_assets/Story/story06/6i-1.png",
                "04_assets/Story/story06/6i-2.png",
                "04_assets/Story/story06/6i-3.png",
                "04_assets/Story/story06/6i-4.png",
                "04_assets/Story/story06/6i-5.png"
            ]
        };
        let isUnsungMode = false, currentIdx = 0;
        function renderCarousel() {
            const container = document.getElementById('main-carousel'); container.innerHTML = '';
            const images = isUnsungMode ? imageAssets.unsung : imageAssets.normal;
            images.forEach((src, i) => {
                const item = document.createElement('div'); item.className = `carousel-item ${i === currentIdx ? 'active' : ''}`;
                item.onclick = () => { currentIdx = i; renderCarousel(); openOverlay(item); };
                const img = document.createElement('img'); img.src = src; item.appendChild(img); container.appendChild(item);
            });
            const activeItem = container.children[currentIdx];
            if (activeItem) activeItem.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
        }
        function toggleMode() { isUnsungMode = !isUnsungMode; document.body.classList.toggle('unsung-mode', isUnsungMode); document.getElementById('toggle-icon').innerText = isUnsungMode ? '●' : '△'; currentIdx = 0; renderCarousel(); }
        function rotateCarousel(dir) { const images = isUnsungMode ? imageAssets.unsung : imageAssets.normal; currentIdx = (currentIdx + dir + images.length) % images.length; renderCarousel(); }
        function openOverlay(el) { const overlay = document.getElementById('image-overlay'), overlayImg = document.getElementById('overlay-img'); overlayImg.src = el.tagName === 'IMG' ? el.src : el.querySelector('img').src; overlay.style.display = 'flex'; }
        function toggleModal(id, show) { document.getElementById(id).style.display = show ? 'flex' : 'none'; }
        window.onload = renderCarousel;
    </script>
</body>

</html>
